@page "/Services/ServicesCounters/"

@inherits ServicesCountersBase

@if (services != null)
{
    <!-- Форма -->
    <FormTableComponent ItemsCollection="@serviceCounters">
        <TableTitleFragment>
            Показания счетчиков услуг ЖКХ
        </TableTitleFragment>
        <TableTitleButtonFragment>
            <div class="col">
                <button class="btn btn-success" @onclick="()=>OpenModal()">Добавить</button>
            </div>
        </TableTitleButtonFragment>
        <TableHeaderFragment>
            <th scope="col" class="w-auto">Дата передачи</th>
            <th scope="col" class="w-auto">Услуга</th>
            <th scope="col" class="w-auto">Показания счетчика</th>
            <th scope="col" class="w-auto text-center"></th>
        </TableHeaderFragment>
        <TableBodyFragment>
            <TableBodyComponent ItemsCollection="@serviceCounters">
                <ItemFragment Context="context">
                    <RowServiceCountersTable ServicesCounter="context" EditEvent="Edit" RemoveEvent="Remove" />
                </ItemFragment>
            </TableBodyComponent>
        </TableBodyFragment>
    </FormTableComponent>

    <!-- Modal -->
    <Modal @ref="modal" CloseWindow="CloseModal">
        <Title>Добавление нового поставщика услуг ЖКХ</Title>
        <Body>
            <div>
                <table class="table table-sm table-bordered table-hover">
                    <thead class="table-light">
                        <tr>
                            <th class="w-25"></th>
                            <th class="w-50"></th>
                            <th class="w-25"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <!--Дата-->
                                <div>
                                    <input class="form-control" placeholder="Дата передачи" @bind="dateCount" />
                                </div>
                            </td>
                            <td>
                                <!--Услуга-->
                                <div>
                                    <select class="form-control" placeholder="Услуга" @bind="@serviceName">
                                        @foreach (var item in services)
                                        {
                                            <option>@item.ToString()</option>
                                        }
                                    </select>
                                </div>
                            </td>
                            <td>
                                <!--Показания счетчика-->
                                <div>
                                    <input class="form-control" placeholder="Показания счетчика" @bind="valueCounter" />
                                </div>
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
        </Body>
        <Footer>
            <button type="button" class="btn btn-sm btn-primary" @onclick="Add">Сохранить</button>
        </Footer>
    </Modal>

}

